<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tasks Dashboard</title>
<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#2575fc">
<style>
  body {
    margin: 0;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background-color: #f5f7fa;
    color: #333;
  }

  header {
    background-color: #1e3a8a;
    color: white;
    padding: 15px;
    text-align: center;
    font-size: 22px;
    font-weight: bold;
    box-shadow: 0 2px 6px rgba(0,0,0,0.2);
  }

  main {
    padding: 20px;
    max-width: 900px;
    margin: 0 auto;
  }

  .tasks-container {
    display: flex;
    flex-direction: column;
    gap: 15px;
  }

  .task-card {
    background: white;
    border-radius: 12px;
    padding: 15px 20px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    transition: transform 0.2s;
  }

  .task-card:hover {
    transform: scale(1.02);
  }

  .task-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  .task-title {
    font-size: 18px;
    font-weight: bold;
    color: #1e3a8a;
  }

  .status {
    padding: 4px 10px;
    border-radius: 10px;
    font-size: 12px;
    color: white;
    text-transform: capitalize;
  }

  .status.completed { background-color: #22c55e; }
  .status.due { background-color: #ef4444; }

  .task-info {
    margin-top: 10px;
  }

  .task-info p {
    margin: 6px 0;
    font-size: 14px;
  }

  footer {
    text-align: center;
    font-size: 13px;
    color: gray;
    margin-top: 30px;
    padding: 10px;
  }

  /* Loader */
  .loader {
    text-align: center;
    padding: 40px;
    color: gray;
  }

  @media (max-width: 600px) {
    .task-card {
      padding: 15px;
    }
    .task-title {
      font-size: 16px;
    }
  }
</style>
</head>
<body>

<header>ðŸ“‹ Student Tasks Dashboard</header>

<main>
  <div class="tasks-container" id="tasksContainer">
    <div class="loader">Loading tasks...</div>
  </div>
</main>

<footer>
  Learn With Enock Â© 2025
</footer>

<!-- Firebase Tasks Script -->
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.0/firebase-app.js";
  import { getFirestore, collection, getDocs } from "https://www.gstatic.com/firebasejs/10.7.0/firebase-firestore.js";

  // âœ… Your Firebase Config
  const firebaseConfig = {
    apiKey: "YOUR-API-KEY",
    authDomain: "YOUR-PROJECT-ID.firebaseapp.com",
    projectId: "YOUR-PROJECT-ID",
    storageBucket: "YOUR-PROJECT-ID.appspot.com",
    messagingSenderId: "YOUR-SENDER-ID",
    appId: "YOUR-APP-ID"
  };

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  const tasksContainer = document.getElementById("tasksContainer");

  async function loadTasks() {
    try {
      const querySnapshot = await getDocs(collection(db, "tasks"));
      tasksContainer.innerHTML = "";

      if (querySnapshot.empty) {
        tasksContainer.innerHTML = "<p style='text-align:center;color:gray;'>No tasks available yet.</p>";
        return;
      }

      querySnapshot.forEach((doc) => {
        const data = doc.data();
        const card = document.createElement("div");
        card.className = "task-card";
        card.innerHTML = `
          <div class="task-header">
            <div class="task-title">${data.title || "Untitled Task"}</div>
            <span class="status ${data.status === "completed" ? "completed" : "due"}">
              ${data.status || "due"}
            </span>
          </div>
          <div class="task-info">
            <p>${data.description || "No description provided."}</p>
            <p><strong>Subject:</strong> ${data.subject || "N/A"}</p>
            <p><strong>Due Date:</strong> ${data.dueDate || "Not set"}</p>
            <p><em>Assigned by: ${data.assignedBy || "Admin"}</em></p>
          </div>
        `;
        tasksContainer.appendChild(card);
      });
    } catch (error) {
      console.error("Error fetching tasks:", error);
      tasksContainer.innerHTML = "<p style='color:red;text-align:center;'>Failed to load tasks. Check console for details.</p>";
    }
  }

  loadTasks();
</script>
<script>
if ("serviceWorker" in navigator) {
    navigator.serviceWorker.register("sw.js")
    .then(() => console.log("Service Worker registered"))
    .catch((err) => console.log("SW registration failed:", err));
}
</script>

</body>
</html>
